#!/usr/bin/env bash
set -euo pipefail

REPO_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
HELPER="$REPO_ROOT/tools/gpt_oss_prompt_helper.py"

if [[ ! -f "$HELPER" ]]; then
  echo "Unable to locate prompt helper at $HELPER" >&2
  exit 1
fi

if [[ $# -eq 0 ]]; then
  exec uv run python "$HELPER"
fi

if [[ "$1" == "--" ]]; then
  shift
  prompt="$*"
  exec uv run python "$HELPER" --prompt "$prompt"
fi

if [[ "$1" == -* ]]; then
  exec uv run python "$HELPER" "$@"
fi

prompt="$*"
exec uv run python "$HELPER" --prompt "$prompt"

<svg xmlns="http://www.w3.org/2000/svg" width="900" height="600" viewBox="0 0 900 600" role="img" aria-labelledby="title desc">
  <title id="title">AGILab layered architecture</title>
  <desc id="desc">High level diagram showing how user surfaces talk to agi_core, agi_env, agi_cluster and workers.</desc>
  <defs>
    <style>
      text { font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif; fill:#0f172a; }
      .layer { stroke:#0f172a; stroke-width:2; rx:12; ry:12; }
      .caption { font-size:16px; font-weight:600; }
      .body { font-size:13px; }
    </style>
  </defs>
  <rect width="100%" height="100%" fill="#f8fafc" rx="24" ry="24" />
  <text class="caption" x="450" y="36" text-anchor="middle">AGILab runtime stack</text>

  <g transform="translate(130,60)">
    <rect class="layer" width="640" height="70" fill="#e0f2fe" />
    <text class="caption" x="320" y="28" text-anchor="middle">User Surfaces</text>
    <text class="body" x="320" y="48" text-anchor="middle">Streamlit pages · CLI scripts · PyCharm run configs</text>
  </g>

  <g transform="translate(130,150)">
    <rect class="layer" width="640" height="90" fill="#c7d2fe" />
    <text class="caption" x="320" y="28" text-anchor="middle">agi_core</text>
    <text class="body" x="320" y="50" text-anchor="middle">apps · streamlit widgets · telemetry · services</text>
    <text class="body" x="320" y="70" text-anchor="middle">builds WorkDispatcher manifests & orchestrates AGI sessions</text>
  </g>

  <g transform="translate(130,260)">
    <rect class="layer" width="640" height="80" fill="#fde68a" />
    <text class="caption" x="320" y="28" text-anchor="middle">agi_env</text>
    <text class="body" x="320" y="50" text-anchor="middle">resolves apps, datasets, credentials and stages ~/wenv bundles</text>
  </g>

  <g transform="translate(130,360)">
    <rect class="layer" width="640" height="90" fill="#fecdd3" />
    <text class="caption" x="320" y="28" text-anchor="middle">agi_cluster · agi_node</text>
    <text class="body" x="320" y="50" text-anchor="middle">Dask scheduler · workers · SSH helpers · capacity balancer</text>
    <text class="body" x="320" y="70" text-anchor="middle">executes WorkDispatcher plans locally or on remote hosts</text>
  </g>

  <g transform="translate(130,470)">
    <rect class="layer" width="640" height="70" fill="#bbf7d0" />
    <text class="caption" x="320" y="28" text-anchor="middle">Workers & Data</text>
    <text class="body" x="320" y="48" text-anchor="middle">~/wenv/&lt;app&gt;_worker · cluster storage · export artifacts · logs</text>
  </g>
</svg>
